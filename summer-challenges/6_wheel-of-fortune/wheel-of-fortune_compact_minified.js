const template=document.createElement('template');template.innerHTML =`<div class='c'><canvas class='w'></canvas><canvas class='p'></canvas></div><style>.c{position:relative;margin:0;}.c canvas{position:absolute;left:0;top:0;}.w{transition:all 2s ease-out;}.w:hover,.p:hover{cursor:pointer;}</style>`;class WoF extends HTMLElement{constructor(){super();}connectedCallback() {this.attachShadow({mode:'open'});const sR=this.shadowRoot;sR.appendChild(template.content.cloneNode(true));const w=sR.querySelector('.w');const c=w.getContext('2d');const p=sR.querySelector('.p');const pC=p.getContext('2d');let r=0;const s=this.getAttribute('size')||500;w.setAttribute('width',s);w.setAttribute('height',s);p.setAttribute('width',s);p.setAttribute('height',s);sR.querySelector('.c').style.width=sR.querySelector('.c').style.height=`${s}px`;const names=this.getAttribute('names')?this.getAttribute('names').split(';'):[];const colours=this.getAttribute('colours')?this.getAttribute('colours').split(';'):[];const longest=[...names].sort((a,b)=>{return b.length-a.length;})[0].length;pC.rect(s/2-2,0,4,s/8);pC.strokeStyle='#fff';pC.fillStyle='#000';pC.fill();pC.stroke();const arc=2*Math.PI/names.length;for(let i=0;i<names.length;i++){const cI=i%colours.length;c.beginPath();c.fillStyle=colours[cI];c.arc(s/2,s/2,s*0.49,arc*i,arc*(i+1));c.lineTo(s/2,s/2);c.fill();}c.textAlign='right';c.textBaseline='middle';c.fillStyle=this.getAttribute('textColour')||'#000000';c.font=`${(s/2.1)/longest}px lucida console`;for(let i=0;i<names.length;i++){const angle=arc*(i+0.5);c.save();c.beginPath();c.translate(s/2,s/2);c.rotate(angle);c.fillText(names[i],4*s/9,0);c.restore();}this.addEventListener('click',()=>{r+=Math.random()*360+1440;w.style.transform=`rotate(${r}deg)`;});}}customElements.define('wheel-of-fortune',WoF);