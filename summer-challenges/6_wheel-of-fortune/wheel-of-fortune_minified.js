const z=document.createElement('template');z.innerHTML=`<div id=c><canvas id=w></canvas><canvas id=p></canvas></div><style>#c{position:relative;margin:0;}#c canvas{position:absolute;left:0;top:0;}#w{transition:all 2s ease-out;}#w:hover,#p:hover{cursor:pointer;}</style>`;class WoF extends HTMLElement{constructor(){super();}connectedCallback(){const t=this;t.attachShadow({mode:'open'});t.shadowRoot.appendChild(z.content.cloneNode(true));t.w=t.shadowRoot.querySelector('#w');t.ctx=t.w.getContext('2d');t.p=t.shadowRoot.querySelector('#p');t.pc=t.p.getContext('2d');t.r=0;t.update();t.addEventListener('click',t.s);}update(){this.i();this.cw();}i(){const t=this;t.size=t.getAttribute('size')||500;t.w.setAttribute('width',t.size);t.w.setAttribute('height',t.size);t.p.setAttribute('width',t.size);t.p.setAttribute('height',t.size);t.shadowRoot.querySelector('#c').style.width=`${t.size}px`;t.shadowRoot.querySelector('#c').style.height=`${t.size}px`;t.n=t.getAttribute('names');t.n=t.n?t.n.split(';'):[];t.c=t.getAttribute('colours');t.c=t.c?t.c.split(';'):[];let nl=[...t.n];let l=nl.sort(function(a, b){return b.length-a.length;})[0];t.l=l.length;}cw(){const t=this;t.pc.rect(t.p.width/2-2,0,4,t.p.height/8);t.pc.strokeStyle='white';t.pc.fillStyle='black';t.pc.fill();t.pc.stroke();let segments=t.n.length;const a=2*Math.PI/segments;for(let i=0;i<segments;i++){const ci=i%t.c.length;t.ctx.beginPath();t.ctx.fillStyle = t.c[ci];t.ctx.arc(t.w.width/2,t.w.height/2,t.w.width*0.49,a*i,a*(i+1));t.ctx.lineTo(t.w.width/2,t.w.height/2);t.ctx.fill();}t.ctx.textAlign='right';t.ctx.textBaseline='middle';t.ctx.fillStyle=t.getAttribute('textColour')||'#000000';t.ctx.font=`${(t.size/2.1)/t.l}px lucida console`;for(let i= 0;i<segments;i++){const v=a*(i+0.5);t.ctx.save();t.ctx.beginPath();t.ctx.translate(t.w.width/2, t.w.width/2);t.ctx.rotate(v);t.ctx.fillText(t.n[i], 4*t.w.width/9, 0);t.ctx.restore();}}s(){t.r+=Math.random()*360+1440;t.w.style.transform=`rotate(${t.r}deg)`;}}customElements.define('wheel-of-fortune',WoF);
